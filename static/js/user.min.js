document.addEventListener("DOMContentLoaded",(()=>{"use strict";const e=document.querySelector(".userCover"),t=document.querySelector(".userCover__edit_wrapper"),n=document.querySelectorAll(".fa-ellipsis-v"),o=document.querySelectorAll(".ellipsis__list"),c=document.querySelectorAll(".edit-post"),l=(document.querySelectorAll("fa-trash-o"),document.querySelectorAll(".cancel__wrapper")),r=document.querySelectorAll(".community__text"),s=document.querySelector(".content__btn"),i=(document.querySelector("#comment"),document.querySelector(".content__form"));let d,a,u,_;const m=e=>{d=e.target,a=d.closest(".content__item"),u=a.querySelector(".content__text-edit"),_=a.querySelector(".content__panel")},y=e=>{let t=p();m(e);const n=d.parentElement.querySelector(".ellipsis__list");t&&o[t]==n?n.classList.remove("active_disp"):n.classList.add("active_disp")},p=()=>{let e;return o.forEach(((t,n)=>{t.classList.contains("active_disp")&&(t.classList.remove("active_disp"),e=n)})),e},v=e=>{m(e);const t=a.querySelector(".content__text"),n=document.createElement("textarea"),o=a.querySelector(".content__text-edit"),c=a.querySelector(".content__panel");p(),t.style.display="none",n.classList.add("edit__content"),n.value=t.textContent,o.before(n),c.style.display="flex"},S=e=>{m(e);const t=a.querySelector(".edit__content"),n=a.querySelector(".content__text");t.remove(),_.style.display="none",n.style.display="block"};e.addEventListener("mouseenter",(()=>{t.classList.toggle("edit__active")})),e.addEventListener("mouseleave",(()=>{t.classList.remove("edit__active")})),n.forEach((e=>{e.addEventListener("click",y)})),c.forEach((e=>{e.addEventListener("click",v)})),l.forEach((e=>{e.addEventListener("click",S)}));s.addEventListener("click",(e=>{(e=>{e.preventDefault();const t=new Headers;t.append("X-CSRFToken",(e=>{let t=null;if(document.cookie&&""!=document.cookie){const n=document.cookie.split(";");for(let o=0;o<=n.length-1;o++)n[o].substring(0,e.length+1)===e+"="&&(t=decodeURIComponent(n[o].substring(e.length+1)))}return t})("csrftoken"));const n=new FormData(i);fetch("http://localhost:8000/createPost/",{method:"POST",body:n,headers:t,credentials:"include"}).then((e=>console.log(e)))})(e)})),r.forEach((e=>{e.textContent.length>50&&(e.textContent+=e.textContent.slice(0,50)+"...")}))}));